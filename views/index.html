<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLMquality - Genealogical Data Processing</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üß¨ LLMquality</h1>
            <p>Genealogical Data Processing & Quality Assessment</p>
        </header>

        <main>
            <form id="dataForm" class="form-container">
                <div class="form-group">
                    <label for="location">Location:</label>
                    <select id="location" name="location" required>
                        <option value="">-- Select Location --</option>
                        <option value="Tannenkirch">Tannenkirch</option>
                        <option value="B√ºkk√∂sd">B√ºkk√∂sd</option>
                        <option value="Fl√∂geln">Fl√∂geln</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="page">Page:</label>
                    <input 
                        type="number" 
                        id="page" 
                        name="page" 
                        min="0" 
                        step="1" 
                        placeholder="Enter page number"
                        required
                    >
                    <div class="input-help">Please enter a non-negative integer (0 or greater)</div>
                </div>

                <div class="form-group">
                    <label for="llm">LLM:</label>
                    <select id="llm" name="llm" required>
                        <option value="">-- Select LLM --</option>
                        <option value="Claude">Claude</option>
                        <option value="ChatGPT">ChatGPT</option>
                        <option value="Gemini">Gemini</option>
                    </select>
                </div>

                <div class="form-actions">
                    <button type="submit" id="rateBtn">
                        <span class="btn-text">Rate</span>
                        <span class="btn-spinner" style="display: none;">‚ü≥</span>
                    </button>
                    <button type="button" id="configBtn" class="btn-secondary">Configure</button>
                    <button type="button" id="helpBtn" class="btn-info">Help</button>
                </div>
            </form>

            <div class="results-section">
                <div class="results-header">
                    <h3>Results</h3>
                    <button type="button" id="saveBtn" class="btn-secondary">Save</button>
                </div>
                <textarea id="resultsArea" class="results-textarea" readonly placeholder="Processing results will appear here..."></textarea>
            </div>

            <div id="error" class="error-container" style="display: none;">
                <h3>‚ö†Ô∏è Error</h3>
                <div id="errorContent"></div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 LLMquality System | Genealogical Data Processing</p>
        </footer>
    </div>

    <!-- Configuration Modal -->
    <div id="configModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Configuration Settings</h2>
                <span class="modal-close" id="closeConfigModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="groundTruthDir">Ground Truth GEDCOM Directory:</label>
                    <input type="text" id="groundTruthDir" name="groundTruthDir" placeholder="Enter directory path...">
                </div>

                <div class="form-group">
                    <label for="llmXmlDir">LLM XML Directory:</label>
                    <input type="text" id="llmXmlDir" name="llmXmlDir" placeholder="Enter directory path...">
                </div>

                <div class="form-group">
                    <label for="outputDir">Output Directory:</label>
                    <input type="text" id="outputDir" name="outputDir" placeholder="Enter directory path...">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="configOk" class="btn-primary">OK</button>
                <button type="button" id="configCancel" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Help - How to Use LLMquality</h2>
                <span class="modal-close" id="closeHelpModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="help-content">
                    <h3>üìç Getting Started</h3>
                    <p>LLMquality helps you assess the quality of Large Language Model (LLM) outputs when processing genealogical data.</p>
                    
                    <h3>üîß Basic Usage</h3>
                    <ol>
                        <li><strong>Location:</strong> Select the geographic location of your genealogical data (Tannenkirch, B√ºkk√∂sd, or Fl√∂geln)</li>
                        <li><strong>Page:</strong> Enter the page number you want to process (must be a positive integer)</li>
                        <li><strong>LLM:</strong> Choose which Large Language Model to evaluate (Claude, ChatGPT, or Gemini)</li>
                        <li><strong>Rate:</strong> Click the Rate button to begin the quality assessment process</li>
                    </ol>

                    <h3>‚öôÔ∏è Configuration</h3>
                    <p>Before rating, configure the application directories:</p>
                    <ul>
                        <li><strong>Ground Truth GEDCOM Directory:</strong> Path to the reference GEDCOM files</li>
                        <li><strong>LLM XML Directory:</strong> Path to the LLM-generated XML output files</li>
                    </ul>
                    <p>Click the Configure button to set these paths. The application will remember your settings using browser cookies.</p>

                    <h3>üìä Results</h3>
                    <p>The results area will display:</p>
                    <ul>
                        <li>Accuracy percentages for names, dates, and relationships</li>
                        <li>Overall quality score</li>
                        <li>Detailed analysis of processed records</li>
                        <li>Quality metrics by category</li>
                        <li>Recommendations for improvement</li>
                    </ul>

                    <h3>üí° Tips</h3>
                    <ul>
                        <li>Ensure your directories are properly configured before rating</li>
                        <li>Use consistent page numbering across your datasets</li>
                        <li>Compare results across different LLMs for the same data</li>
                        <li>Review recommendations to improve data quality</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="closeHelp" class="btn-primary">Close</button>
            </div>
        </div>
    </div>

    <!-- Save File Modal -->
    <div id="saveFileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Save Results</h2>
                <span class="modal-close" id="closeSaveFileModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="fileName">File Name:</label>
                    <input type="text" id="fileName" name="fileName" placeholder="Enter file name (e.g., results.txt)">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="saveFileOk" class="btn-primary">OK</button>
                <button type="button" id="saveFileCancel" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <!-- File Overwrite Confirmation Modal -->
    <div id="overwriteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>File Already Exists</h2>
                <span class="modal-close" id="closeOverwriteModal">&times;</span>
            </div>
            <div class="modal-body">
                <p id="overwriteMessage">The file already exists. Do you want to overwrite it?</p>
            </div>
            <div class="modal-footer">
                <button type="button" id="overwriteYes" class="btn-primary">Yes, Overwrite</button>
                <button type="button" id="overwriteNo" class="btn-secondary">No, Cancel</button>
            </div>
        </div>
    </div>

    <script src="/app.js"></script>
</body>
</html>
