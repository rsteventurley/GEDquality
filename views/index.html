<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LLMquality - Genealogical Data Processing</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>üß¨ LLMquality</h1>
            <p>Genealogical Data Processing & Quality Assessment</p>
        </header>

        <main>
            <form id="dataForm" class="form-container">
                <div class="form-group">
                    <label>GEDCOM File:</label>
                    <div class="file-upload-container">
                        <input type="file" id="gedcomFile" accept=".ged,.gedcom" style="display: none;">
                        <button type="button" id="gedcomUploadBtn" class="btn-upload">
                            <span class="upload-text">Choose GEDCOM File</span>
                            <span class="file-name" id="gedcomFileName"></span>
                        </button>
                    </div>
                </div>

                <div class="form-group">
                    <label>XML File:</label>
                    <div class="file-upload-container">
                        <input type="file" id="xmlFile" accept=".xml" style="display: none;">
                        <button type="button" id="xmlUploadBtn" class="btn-upload">
                            <span class="upload-text">Choose XML File</span>
                            <span class="file-name" id="xmlFileName"></span>
                        </button>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" id="rateBtn">
                        <span class="btn-text">Rate</span>
                        <span class="btn-spinner" style="display: none;">‚ü≥</span>
                    </button>
                    <button type="button" id="helpBtn" class="btn-info">Help</button>
                </div>
            </form>

            <div class="results-section">
                <div class="results-header">
                    <h3>Results</h3>
                    <button type="button" id="saveBtn" class="btn-secondary">Save</button>
                </div>
                <textarea id="resultsArea" class="results-textarea" readonly placeholder="Processing results will appear here..."></textarea>
            </div>

            <div id="error" class="error-container" style="display: none;">
                <h3>‚ö†Ô∏è Error</h3>
                <div id="errorContent"></div>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 LLMquality System | Genealogical Data Processing</p>
        </footer>
    </div>

    <!-- Help Modal -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Help - How to Use LLMquality</h2>
                <span class="modal-close" id="closeHelpModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="help-content">
                    <h3>üìç Getting Started</h3>
                    <p>LLMquality helps you assess the quality of Large Language Model (LLM) outputs when processing genealogical data.</p>
                    
                    <h3>üîß Basic Usage</h3>
                    <ol>
                        <li><strong>GEDCOM File:</strong> Upload your reference GEDCOM file by clicking "Choose GEDCOM File"</li>
                        <li><strong>XML File:</strong> Upload the LLM-generated XML file by clicking "Choose XML File"</li>
                        <li><strong>Rate:</strong> Click the Rate button to begin the quality assessment process</li>
                    </ol>

                    <h3>üìÅ File Upload</h3>
                    <p>Upload the required files for analysis:</p>
                    <ul>
                        <li><strong>GEDCOM File:</strong> The reference genealogical data file (.ged or .gedcom format)</li>
                        <li><strong>XML File:</strong> The LLM-generated output file (.xml format)</li>
                    </ul>
                    <p>Both files are uploaded securely to the server for processing and are automatically cleaned up after analysis.</p>

                    <h3>üìä Results</h3>
                    <p>The results area will display:</p>
                    <ul>
                        <li>Accuracy percentages for names, dates, and relationships</li>
                        <li>Overall quality score</li>
                        <li>Detailed analysis of processed records</li>
                        <li>Quality metrics by category</li>
                        <li>Recommendations for improvement</li>
                    </ul>

                    <h3>üí° Tips</h3>
                    <ul>
                        <li>Ensure your directories are properly configured before rating</li>
                        <li>Use consistent page numbering across your datasets</li>
                        <li>Compare results across different LLMs for the same data</li>
                        <li>Review recommendations to improve data quality</li>
                    </ul>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="closeHelp" class="btn-primary">Close</button>
            </div>
        </div>
    </div>

    <!-- Save File Modal -->
    <div id="saveFileModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Save Results</h2>
                <span class="modal-close" id="closeSaveFileModal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="fileName">File Name:</label>
                    <input type="text" id="fileName" name="fileName" placeholder="Enter file name (e.g., results.txt)">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="saveFileOk" class="btn-primary">OK</button>
                <button type="button" id="saveFileCancel" class="btn-secondary">Cancel</button>
            </div>
        </div>
    </div>

    <script src="/app.js"></script>
</body>
</html>
